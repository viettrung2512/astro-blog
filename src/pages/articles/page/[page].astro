---
import MainLayout from "../../../layouts/MainLayout.astro";
import BlogsPaginated from "../../../components/Blog/BlogsPaginated.jsx";

const { page } = Astro.params;
const currentPage = Number(page) || 1;
const postsPerPage = 6;
const totalPages = 10; // Có thể fetch từ API nếu backend trả totalPages
---

<MainLayout title="Tất cả bài viết">
  <div class="mt-10">
    <h1 class="text-3xl font-bold text-center mb-6">Tất cả bài viết</h1>
    <BlogsPaginated client:only="react" currentPage={currentPage} postsPerPage={postsPerPage} />
  </div>

  <div class="mt-8 flex justify-center">
    <nav class="flex gap-2 text-sm">
      {currentPage > 1 ? (
        <a href={`/articles/page/${currentPage - 1}`} class="px-3 py-1 border rounded hover:bg-gray-100">Prev</a>
      ) : (
        <span class="px-3 py-1 border rounded text-gray-400">Prev</span>
      )}

      {Array.from({ length: totalPages }, (_, i) => i + 1).map(p => (
        <a
          href={`/articles/page/${p}`}
          class={`px-3 py-1 border rounded ${currentPage === p ? 'bg-blue-500 text-white' : 'hover:bg-gray-100'}`}
        >
          {p}
        </a>
      ))}

      {currentPage < totalPages ? (
        <a href={`/articles/page/${currentPage + 1}`} class="px-3 py-1 border rounded hover:bg-gray-100">Next</a>
      ) : (
        <span class="px-3 py-1 border rounded text-gray-400">Next</span>
      )}
    </nav>
  </div>
</MainLayout>
